/**
 * name: note-book
 * version: v1.0.9
 * description: ç¬”è®°æœ¬ ğŸ“š  ä¸–ç•Œä¸Šåªæœ‰10ç±»äººï¼šä¸€ç±»æ˜¯æ‡‚äºŒè¿›åˆ¶çš„ï¼Œä¸€ç±»æ˜¯ä¸æ‡‚çš„ã€‚
 * author: Alimales <only_tigerhu@163.com>
 * homepage: https://www.tigerzh.com
 */
import{_ as s,o as n,c as a,a as l}from"./app.a5d386c5.js";const p=JSON.parse('{"title":"DockeræŒ‡å—","description":"","frontmatter":{},"headers":[{"level":2,"title":"Dockerçš„å®‰è£…","slug":"dockerçš„å®‰è£…","link":"#dockerçš„å®‰è£…","children":[]},{"level":2,"title":"Dockeré•œåƒæ“ä½œ","slug":"dockeré•œåƒæ“ä½œ","link":"#dockeré•œåƒæ“ä½œ","children":[]},{"level":2,"title":"Dockerå®¹å™¨æ“ä½œ","slug":"dockerå®¹å™¨æ“ä½œ","link":"#dockerå®¹å™¨æ“ä½œ","children":[]},{"level":2,"title":"Dockerfileè¯¦è§£","slug":"dockerfileè¯¦è§£","link":"#dockerfileè¯¦è§£","children":[]},{"level":2,"title":"Dockerç½‘ç»œæ“ä½œ","slug":"dockerç½‘ç»œæ“ä½œ","link":"#dockerç½‘ç»œæ“ä½œ","children":[{"level":3,"title":"ç½‘ç»œé©±åŠ¨ç¨‹åº","slug":"ç½‘ç»œé©±åŠ¨ç¨‹åº","link":"#ç½‘ç»œé©±åŠ¨ç¨‹åº","children":[]},{"level":3,"title":"åˆ›å»ºä¸€ä¸ªnetwork","slug":"åˆ›å»ºä¸€ä¸ªnetwork","link":"#åˆ›å»ºä¸€ä¸ªnetwork","children":[]},{"level":3,"title":"å°†å®¹å™¨è¿æ¥åˆ°network","slug":"å°†å®¹å™¨è¿æ¥åˆ°network","link":"#å°†å®¹å™¨è¿æ¥åˆ°network","children":[]},{"level":3,"title":"åˆ é™¤network","slug":"åˆ é™¤network","link":"#åˆ é™¤network","children":[]}]},{"level":2,"title":"Dockeræ•°æ®å·æ“ä½œ","slug":"dockeræ•°æ®å·æ“ä½œ","link":"#dockeræ•°æ®å·æ“ä½œ","children":[]},{"level":2,"title":"Docker-Compose","slug":"docker-compose","link":"#docker-compose","children":[]},{"level":2,"title":"Docker-compose.ymlé…ç½®æ–‡ä»¶","slug":"docker-compose-ymlé…ç½®æ–‡ä»¶","link":"#docker-compose-ymlé…ç½®æ–‡ä»¶","children":[]},{"level":2,"title":"Docker-composeæŒ‡å—","slug":"docker-composeæŒ‡å—","link":"#docker-composeæŒ‡å—","children":[]}],"relativePath":"note/DockeræŒ‡å—.md"}'),o={name:"note/DockeræŒ‡å—.md"},e=[l('<h1 id="dockeræŒ‡å—" tabindex="-1">DockeræŒ‡å— <a class="header-anchor" href="#dockeræŒ‡å—" aria-hidden="true">#</a></h1><h2 id="dockerçš„å®‰è£…" tabindex="-1">Dockerçš„å®‰è£… <a class="header-anchor" href="#dockerçš„å®‰è£…" aria-hidden="true">#</a></h2><p>å­¦ä¹ æœ¬æ•™ç¨‹å‰é¦–å…ˆæˆ‘ä»¬è¦å®‰è£…Dockerã€‚èœé¸Ÿæ•™ç¨‹ä¸Šæ€»ç»“äº†Dockeråœ¨å„ä¸ªå¹³å°å’Œç³»ç»Ÿä¸Šçš„å®‰è£…ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒã€‚è¿™é‡Œæ€»ç»“äº†ä¸‹Dockeråœ¨é˜¿é‡Œäº‘Ubuntuç³»ç»Ÿä¸Šçš„å®‰è£…è¿‡ç¨‹ã€‚æ­¥éª¤çœ‹ä¼¼å¾ˆå¤šä¸”å¤æ‚ï¼Œä½†å¤§å®¶åªéœ€è¦ä¸€æ­¥ä¸€æ­¥copyå’Œpasteå‘½ä»¤å°±è¡Œäº†ï¼Œæ•´ä¸ªå®‰è£…è¿‡ç¨‹å¾ˆæµç•…ã€‚</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># ä»¥Ubuntuä¸ºä¾‹</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># Step 1: ç§»é™¤ä¹‹å‰dockerç‰ˆæœ¬å¹¶æ›´æ–°æ›´æ–° apt åŒ…ç´¢å¼•</span></span>\n<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt-get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">remove</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-engine</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker.io</span></span>\n<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt-get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">update</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># Step 2: å®‰è£… apt ä¾èµ–åŒ…ï¼Œç”¨äºé€šè¿‡HTTPSæ¥è·å–ä»“åº“</span></span>\n<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt-get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt-transport-https</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ca-certificates</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">software-properties-common</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># Step 3: æ·»åŠ  Docker çš„å®˜æ–¹ GPG å¯†é’¥</span></span>\n<span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-fsSL</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt-key</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># Step 4: è®¾ç½®dockerç¨³å®šç‰ˆä»“åº“ï¼Œè¿™é‡Œä½¿ç”¨äº†é˜¿é‡Œäº‘ä»“åº“</span></span>\n<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add-apt-repository</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/ubuntu </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">lsb_release</span><span style="color:#C3E88D;"> -cs</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;"> stable</span><span style="color:#89DDFF;">&quot;</span></span>\n<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt-get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">update</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># Step 5: å®‰è£…å…è´¹çš„docker Communityç‰ˆæœ¬docker-ce</span></span>\n<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt-get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-ce</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># sudo apt-get install -y docker-ce=&lt;VERSION&gt; #è¯¥å‘½ä»¤å¯ä»¥é€‰æ‹©docker-ceç‰ˆæœ¬</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># Step 6: æŸ¥çœ‹dockerç‰ˆæœ¬åŠè¿è¡ŒçŠ¶æ€</span></span>\n<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span></span>\n<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">status</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># Step 7ï¼šæœ¬æ­¥éå¿…éœ€ã€‚ä½¿ç”¨é˜¿é‡Œäº‘è®¾ç½®Dockeré•œåƒåŠ é€Ÿï¼Œæ³¨æ„ä¸‹é¢é“¾æ¥è¯·ä½¿ç”¨é˜¿é‡Œäº‘ç»™è‡ªå·±çš„URL</span></span>\n<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/docker</span><span style="color:#A6ACCD;"> </span></span>\n<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tee</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/docker/daemon.json</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&lt;-</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">EOF</span><span style="color:#C3E88D;">&#39; </span></span>\n<span class="line"><span style="color:#C3E88D;">{  &quot;registry-mirrors&quot;: [&quot;https://ua3456xxx.mirror.aliyuncs.com&quot;] } </span></span>\n<span class="line"><span style="color:#89DDFF;">EOF</span><span style="color:#A6ACCD;"> </span></span>\n<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">daemon-reload</span><span style="color:#A6ACCD;"> </span></span>\n<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">restart</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span></span>\n<span class="line"></span></code></pre></div><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹Dockerçš„ä¸»è¦å‘½ä»¤ã€‚</p><h2 id="dockeré•œåƒæ“ä½œ" tabindex="-1">Dockeré•œåƒæ“ä½œ <a class="header-anchor" href="#dockeré•œåƒæ“ä½œ" aria-hidden="true">#</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># æœç´¢é•œåƒï¼šdocker search + é•œåƒåå­—</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">search</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># ä»registryæ‹‰å–é•œåƒï¼šdocker pull + é•œåƒåå­—:ç‰ˆæœ¬å·</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pull</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx:latest</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># ä»registryä»“åº“æäº¤é•œåƒï¼šdocker push + ä»“åº“å:æ ‡ç­¾</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">push</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">repro1:v1.</span><span style="color:#F78C6C;">0</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æŸ¥çœ‹æœ¬åœ°é•œåƒ: docker images</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">images</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># ä½¿ç”¨Dockerfileåˆ›å»ºé•œåƒ: docker build + ç›®å½•ï¼Œ.ä»£è¡¨å½“å‰ç›®å½•ï¼Œ-tè¡¨ç¤ºåŠ æ ‡ç­¾</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-t</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx:</span><span style="color:#F78C6C;">1.0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªé•œåƒ: docker rmi + é•œåƒ1 + é•œåƒ2</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rmi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx:</span><span style="color:#F78C6C;">1.0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx:</span><span style="color:#F78C6C;">2.0</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># åˆ é™¤æœªæ ‡è®°æˆ–æœªç”¨è¿‡çš„é•œåƒ</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">image</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">prune</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># åˆ é™¤æœªä½¿ç”¨è¿‡çš„é•œåƒ</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">image</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">prune</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># ç»™é•œåƒåŠ æ ‡è®°ï¼š docker tag é•œåƒæ ‡ç­¾ æ–°é•œåƒæ ‡ç­¾å</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tag</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx:</span><span style="color:#F78C6C;">1.0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx1</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æŠŠé•œåƒä¿å­˜ä¸º.taræ–‡ä»¶: docker save é•œåƒ &gt; æ–‡ä»¶</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">save</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx:</span><span style="color:#F78C6C;">1.0</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx_v1.tar</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># ä».taræ–‡ä»¶è½½å…¥é•œåƒ: docker load -i .taræ–‡ä»¶</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">load</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx_v1.tar</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æ ¹æ®å®¹å™¨åˆ›å»ºé•œåƒï¼šdocker commit å®¹å™¨å é•œåƒå</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">commit</span><span style="color:#A6ACCD;"> </span></span>\n<span class="line"></span></code></pre></div><h2 id="dockerå®¹å™¨æ“ä½œ" tabindex="-1">Dockerå®¹å™¨æ“ä½œ <a class="header-anchor" href="#dockerå®¹å™¨æ“ä½œ" aria-hidden="true">#</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight has-diff" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># åˆ›å»ºå®¹å™¨: docker create + é€‰é¡¹(-i, -t, -d, -p, -v, -e) + é•œåƒ</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx_1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8080</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">80</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx:</span><span style="color:#F78C6C;">1.0</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># å„é€‰é¡¹å«ä¹‰</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># -i:ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸-t åŒæ—¶ä½¿ç”¨ï¼›</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># -d:åå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨IDï¼›</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># -p:ç«¯å£éšå°„, å®¿ä¸»æœºåœ¨å‰ï¼Œå®¹å™¨åœ¨å</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># -P:éšæœºæ˜ å°„å®¿ä¸»æœºç«¯å£</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># -t:ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸-i åŒæ—¶ä½¿ç”¨ï¼›</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># -v:ç›®å½•æŒ‚è½½</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># --entrypoint: æŒ‡å®šè¿›å…¥ç‚¹</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># --restart=always: æœåŠ¡é‡å¯</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># å¯åŠ¨å®¹å™¨ï¼šdocker start + å®¹å™¨å</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx_1</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># åˆ›å»º + è¿è¡Œå®¹å™¨: docker run + é€‰é¡¹ + é•œåƒ + å‘½ä»¤</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx_1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8080</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">80</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx:</span><span style="color:#F78C6C;">1.0</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ubuntu</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/bin/bash</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æŸ¥çœ‹æ­£åœ¨è¿è¡Œä¸­çš„å®¹å™¨ï¼šdocker ps</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ps</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ŒåŒ…æ‹¬åœæ­¢è¿è¡Œçš„å®¹å™¨: docker ps -a</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ps</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨: docker stop å®¹å™¨</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx_1</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># é‡å¯å®¹å™¨ï¼šdocker restart + å®¹å™¨å</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">restart</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx_1</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># å®¹å™¨é‡å‘½åï¼šdocker rename è€åå­— æ–°åå­—</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rename</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx_1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx_2</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># åˆ é™¤ä¸€ä¸ªå®¹å™¨ï¼šdocker rm å®¹å™¨å</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx_1</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># å¼ºåˆ¶åˆ é™¤ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼šdocker rm -f å®¹å™¨å</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-f</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx_1</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># åˆ é™¤å·²åœæ­¢è¿è¡Œçš„æ‰€æœ‰å®¹å™¨: docker container prune</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">container</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">prune</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æ‹·è´æ–‡ä»¶ï¼Œä»å®¹å™¨åˆ°å®¿ä¸»æœºï¼šdocker cp å®¹å™¨å:å®¹å™¨å†…è·¯å¾„ å®¿ä¸»æœºæ–‡ä»¶è·¯å¾„</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">myweb_1:/index.html</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">index.html</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æ‹·è´æ–‡ä»¶ï¼Œä»å®¿ä¸»æœºåˆ°å®¹å™¨ï¼šdocker cp å®¿ä¸»æœºæ–‡ä»¶è·¯å¾„ å®¹å™¨å:å®¹å™¨å†…è·¯å¾„</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">index.html</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">myweb_1:/index.html</span><span style="color:#A6ACCD;"> </span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># è¿›å…¥è¿è¡Œçš„å®¹å™¨ï¼Œæ‰§è¡Œå‘½ä»¤: docker exec + é€‰é¡¹ + å®¹å™¨å + å‘½ä»¤ + å‚æ•°</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æ¨èå¤§å®¶ä½¿ç”¨ docker execå‘½ä»¤ï¼Œä½¿ç”¨æ­¤å‘½ä»¤å³ä½¿exitå®¹å™¨ç»ˆç«¯ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´å®¹å™¨çš„åœæ­¢</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx_1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/bin/bash</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx_1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/bin/bash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start.sh</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æŸ¥çœ‹å®¹å™¨ç«¯å£æ˜ å°„ï¼šdocker port å®¹å™¨å</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">port</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx_1</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æŸ¥çœ‹å®¹å™¨å†…å·²ä¿®æ”¹æ–‡ä»¶ï¼šdocker diff å®¹å™¨å</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">diff</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx_1</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼šdocker logs + å®¹å™¨å</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">logs</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">web</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æŸ¥çœ‹å®¹å™¨å†…è¿è¡Œè¿›ç¨‹ï¼šdocker top + å®¹å™¨å</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">top</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">web</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æŸ¥çœ‹å®¹å™¨çš„åº•å±‚ä¿¡æ¯ï¼šdocker inspect + å®¹å™¨å</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">inspect</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">web</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># åˆ©ç”¨inspectå‘½ä»¤æŸ¥çœ‹å®¹å™¨çš„IPåœ°å€</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">inspect</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">web</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">IPAddress</span><span style="color:#89DDFF;">&quot;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æŸ¥çœ‹è¿è¡Œå®¹å™¨çš„ç»Ÿè®¡æ•°æ®ï¼šdocker stats</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stats</span></span>\n<span class="line"></span></code></pre></div><h2 id="dockerfileè¯¦è§£" tabindex="-1">Dockerfileè¯¦è§£ <a class="header-anchor" href="#dockerfileè¯¦è§£" aria-hidden="true">#</a></h2><p>ä½¿ç”¨<code>$ docker build</code>å‘½ä»¤æ„å»ºé•œåƒæ—¶éœ€è¦ç”¨åˆ°Dockerfileï¼Œå®ƒé€šå¸¸ä¼šåŒ…å«å¦‚ä¸‹å‘½ä»¤ï¼š</p><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>FROM</td><td>æŒ‡å®šåŸºç¡€é•œåƒ</td><td>FROM python:3.8.3-alpine</td></tr><tr><td>MAINTAINER</td><td>é•œåƒåˆ›å»ºè€…</td><td>MAINTAINER å¤§æ±Ÿç‹—</td></tr><tr><td>COPY</td><td>æ·»åŠ å®¿ä¸»æœºæ–‡ä»¶åˆ°å®¹å™¨ï¼Œå¤åˆ¶</td><td>COPY . /html/myapp</td></tr><tr><td>ADD</td><td>æ·»åŠ å®¿ä¸»æœºæ–‡ä»¶åˆ°å®¹å™¨ï¼Œå¤åˆ¶+è§£å‹</td><td>ADD myfile.tar /html/myapp</td></tr><tr><td>RUN</td><td>åˆ›å»ºé•œåƒæ—¶è¦æ‰§è¡Œçš„å‘½ä»¤</td><td>RUN pip install -r requirements.txt</td></tr><tr><td>USER</td><td>åˆ‡æ¢æ‰§è¡Œåç»­å‘½ä»¤çš„ç”¨æˆ·å’Œç”¨æˆ·ç»„, ä½†è¿™ä¸ªç”¨æˆ·å¿…éœ€é¦–å…ˆå·²ä½¿ç”¨RUNçš„å‘½ä»¤è¿›è¡Œåˆ›å»ºå¥½äº†ã€‚</td><td>RUN groupadd -r redis &amp;&amp; useradd -r -g redis redis; USER redis(åˆ‡æ¢ç”¨æˆ·)</td></tr><tr><td>WORKDIR</td><td>æŒ‡å®šå·¥ä½œç›®å½•</td><td>WORKDIR /html/myapp</td></tr><tr><td>CMD</td><td>å®¹å™¨å¯åŠ¨æ—¶é»˜è®¤è¦è¿è¡Œçš„ç¨‹åºã€‚å¦‚æœæ‰§è¡Œ docker run åé¢è·Ÿå¯åŠ¨å‘½ä»¤ä¼šè¢«è¦†ç›–æ‰ã€‚</td><td>CMD [&quot;/bin/bash&quot;]</td></tr><tr><td>ENV</td><td>è®¾ç½®ç¯å¢ƒå˜é‡</td><td>ENV APP_HOME /html/myapp</td></tr><tr><td>ENTRYPOINT</td><td>åŒCMDï¼Œä½†å…¶ä¸ä¼šè¢«è¦†ç›–ï¼Œå¯ä»¥å’Œdocker runå‘½ä»¤ä¼ é€’çš„å‚æ•°è¿›è¡Œæ‹¼æ¥æ‰§è¡Œã€‚</td><td>å¦‚æœè®¾ç½®ï¼šENTRYPOINT [&quot;nginx&quot;, &quot;-c&quot;] ï¼Œ è¿è¡Œ<code>$ docker run mynginx_1 -c /etc/nginx/myweb.conf</code>å°†é»˜è®¤æ‰§è¡Œå‘½ä»¤ï¼š<code>nginx -c /etc/nginx/myweb.conf</code>ã€‚</td></tr><tr><td>VOLUME</td><td>å®šä¹‰åŒ¿åæ•°æ®å·ã€‚åœ¨å¯åŠ¨å®¹å™¨æ—¶å¿˜è®°æŒ‚è½½æ•°æ®å·ï¼Œä¼šè‡ªåŠ¨æŒ‚è½½åˆ°åŒ¿åå·ã€‚</td><td>VOLUME /tmp</td></tr><tr><td>EXPOSE</td><td>å®¹å™¨æš´éœ²ç«¯å£ï¼Œä¾›linkåˆ°å½“å‰å®¹å™¨æˆ–é€šè¿‡docker networkçš„å®¹å™¨ï¼Œä¸ä¼šå’Œå®¿ä¸»æœºç«¯å£æ˜ å°„å…³ç³»ã€‚</td><td>EXPOSE 8080</td></tr></tbody></table><h2 id="dockerç½‘ç»œæ“ä½œ" tabindex="-1">Dockerç½‘ç»œæ“ä½œ <a class="header-anchor" href="#dockerç½‘ç»œæ“ä½œ" aria-hidden="true">#</a></h2><p>Docker network æ˜¯ä¸»è¦æ˜¯ç”¨åšå®¹å™¨ä¹‹é—´çš„é€šä¿¡ï¼Œå³ç»„å»ºå®¹å™¨ä¹‹é—´çš„å±€åŸŸç½‘ï¼Œç„¶ååŠ å…¥è¿™ä¸ªç½‘ç»œçš„å®¹å™¨å¯ä»¥ä½¿ç”¨åˆ«å(network-alias, æ¯”å¦‚web, db)æˆ–è€…IPåœ°å€è¿›è¡Œé€šä¿¡ï¼Œå°±å¦‚åŒå±€åŸŸç½‘ä¸­ä¸»æœºä¹‹é—´çš„ç›¸äº’è®¿é—®ã€‚</p><p><strong>å¤‡æ³¨</strong>ï¼šä½¿ç”¨<code>-link</code> ä¹Ÿå¯ä»¥å®ç°å®¹å™¨ä¹‹é—´ç®€å•çš„ç½‘ç»œï¼Œä½†æ˜¯å®¹å™¨è¾ƒå¤šè€Œä¸”é€šä¿¡å…³ç³»è¾ƒä¸ºå¤æ‚æ—¶ï¼Œä½¿ç”¨networkå°±æ›´æœ‰æ¡ç†ã€‚é™¤æ­¤ä»¥å¤–ï¼Œå®˜æ–¹ä¹Ÿå·²ç»å¾ˆæ—©ä¸å»ºè®®ä½¿ç”¨<code>-link</code>æ–¹å¼è¿›è¡Œå®¹å™¨äº’è”ï¼Œ-linkæœªæ¥å¯èƒ½ä¼šè¢«åˆ é™¤ã€‚</p><h3 id="ç½‘ç»œé©±åŠ¨ç¨‹åº" tabindex="-1">ç½‘ç»œé©±åŠ¨ç¨‹åº <a class="header-anchor" href="#ç½‘ç»œé©±åŠ¨ç¨‹åº" aria-hidden="true">#</a></h3><p>Docker çš„ç½‘ç»œé©±åŠ¨ç¨‹åºé»˜è®¤æƒ…å†µä¸‹æœ‰å››ä¸ªï¼š<code>bridge</code>ã€<code>host</code>ã€<code>overlay </code>å’Œ <code>macvlan</code>ï¼Œè¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ç½‘ç»œé©±åŠ¨ none ç”¨äºç¦æ­¢å®¹å™¨è®¿é—®ç½‘ç»œã€‚</p><ul><li><code>bridge</code>ï¼šé»˜è®¤çš„ç½‘ç»œé©±åŠ¨ç¨‹åºã€‚å¦‚æœåœ¨åˆ›å»ºçš„æ—¶å€™æ²¡æœ‰æŒ‡å®šç½‘ç»œé©±åŠ¨ï¼Œåˆ™é»˜è®¤ä½¿ç”¨ bridgeï¼Œä¹Ÿå°±æ˜¯æ¡¥æ¥ç½‘ç»œã€‚è·Ÿè™šæ‹Ÿæœºçš„ç½‘ç»œåœ°å€è½¬æ¢å·®ä¸å¤šï¼Œé€šè¿‡ä¸€ä¸ªå†…éƒ¨çš„å­ç½‘å‘å®¹å™¨æä¾› IP å’Œç½‘ç»œã€‚</li><li><code>host</code>ï¼šå®¹å™¨ä¼šç›´æ¥ä¸å®¿ä¸»ç³»ç»Ÿå…±äº« IP åœ°å€å’Œç½‘ç»œï¼Œä½†æ˜¯å…¶å®ƒï¼ˆä¾‹å¦‚å­˜å‚¨ï¼Œè¿›ç¨‹å‘½åç©ºé—´å’Œç”¨æˆ·å‘½åç©ºé—´ï¼‰ç›¸å¯¹å®¿ä¸»æœºéš”ç¦»çš„ã€‚</li><li><code>overlay</code>ï¼šè¦†ç›–ç½‘ç»œæ¨¡å¼å¯ä»¥å°†ä¸åŒçš„Dockerdå®ˆæŠ¤è¿›ç¨‹è¿æ¥åœ¨ä¸€èµ·ï¼Œè¯¥ç½‘ç»œæ¨¡å¼æ”¯æŒé›†ç¾¤å®¹å™¨ä¹‹é—´ç›¸äº’é€šä¿¡ï¼Œä»¥åŠé›†ç¾¤å’ŒæŸä¸ªå•æœºç‰ˆç‹¬ç«‹å®¹å™¨ç›´æ¥ç›¸äº’é€šä¿¡ã€‚è¯¥ç½‘ç»œæ¨¡å¼ä½¿ç”¨åœºæ™¯æ¯”è¾ƒå¹¿æ³›ï¼Œé€šå¸¸é›†ç¾¤éƒ¨ç½²æ—¶ä¼šä½¿ç”¨è¯¥æ¨¡å¼ã€‚</li><li><code>macvlan</code>ï¼šè¿™ä¸ªç½‘ç»œé©±åŠ¨æœ‰ç‚¹åƒè™šæ‹Ÿæœºçš„æ¡¥æ¥æ¨¡å¼ï¼Œå®ƒå¯ä»¥è®©ä½ çš„å®¹å™¨ç›´æ¥è¿æ¥åˆ°ä½ çš„ç‰©ç†ç½‘ç»œï¼Œæ¯”å¦‚è¿æ¥åˆ°ä½ çš„è·¯ç”±å™¨ï¼Œè®©ç‰©ç†ç½‘ç»œæ¥æä¾› IP åœ°å€å’Œç½‘ç»œã€‚</li><li><code>none</code>: ç¦ç”¨å®¹å™¨æ‰€æœ‰ç½‘ç»œã€‚é€šå¸¸ä¸è‡ªå®šä¹‰ç½‘ç»œé©±åŠ¨ç¨‹åºä¸€èµ·ä½¿ç”¨ã€‚</li></ul><h3 id="åˆ›å»ºä¸€ä¸ªnetwork" tabindex="-1">åˆ›å»ºä¸€ä¸ªnetwork <a class="header-anchor" href="#åˆ›å»ºä¸€ä¸ªnetwork" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># mysite1-networkæ˜¯å±€åŸŸç½‘çš„åå­—ï¼Œå¯ä»¥è‡ªå®šä¹‰ã€‚é»˜è®¤bridgeæ¨¡å¼ã€‚</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">network</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysite1-network</span><span style="color:#A6ACCD;"> </span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># åˆ©ç”¨--driveræˆ–-dæŒ‡å®šä½¿ç”¨bridgeé©±åŠ¨ï¼Œåˆ›å»ºmysite2-networkç½‘ç»œ</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">network</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â€“-driver</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bridge</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysite2-network</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æŸ¥çœ‹å·²åˆ›å»ºçš„networkåˆ—è¡¨</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">network</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ls</span><span style="color:#A6ACCD;">  </span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æŸ¥çœ‹ç½‘ç»œè¯¦æƒ…</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">network</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">inspect</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysite1-network</span></span>\n<span class="line"></span>\n<span class="line"></span></code></pre></div><h3 id="å°†å®¹å™¨è¿æ¥åˆ°network" tabindex="-1">å°†å®¹å™¨è¿æ¥åˆ°network <a class="header-anchor" href="#å°†å®¹å™¨è¿æ¥åˆ°network" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># è¿è¡Œæ–°çš„å®¹å™¨ï¼Œå¹¶åŠ å…¥åˆ°mysite1-networkç½‘ç»œä¸­</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># --network è¡¨ç¤ºè¿™ä¸ªå®¹å™¨è¦è¿æ¥åˆ°çš„ç½‘ç»œ</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># --network-alias è¡¨ç¤ºè¿™ä¸ªå®¹å™¨åœ¨æ­¤ç½‘ç»œä¸­çš„åç§°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨--ipæ¥æŒ‡å®šå®¹å™¨çš„ip</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--name=docker-web</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--network=mysite1-network</span><span style="color:#A6ACCD;"> </span></span>\n<span class="line"><span style="color:#FFCB6B;">--network-</span><span style="color:#82AAFF;">alias</span><span style="color:#FFCB6B;">=web</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-web-image</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># å°†å·²ç»åœ¨è¿è¡Œçš„å®¹å™¨åŠ å…¥ç½‘ç»œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤, å®¹å™¨åä¸ºdocker-webï¼Œåˆ«åä¸ºweb</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">network</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">connect</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--alias=web</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--network=mysite1-network</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-web</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># è¿æ¥ç½‘ç»œæ—¶ä¸ºdocker-webå®¹å™¨æŒ‡å®šipåœ°å€</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">network</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">connect</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--ip=192.10.36.122</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">multi-host-network</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-web</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æ–­å¼€docker-webå®¹å™¨ä¸mysite1-networkçš„è¿æ¥</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">network</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">disconnet</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysite1-network</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-web</span></span>\n<span class="line"></span></code></pre></div><h3 id="åˆ é™¤network" tabindex="-1">åˆ é™¤network <a class="header-anchor" href="#åˆ é™¤network" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># åˆ é™¤mysite1-networkç½‘ç»œ</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">network</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysite1-network</span></span>\n<span class="line"></span></code></pre></div><h2 id="dockeræ•°æ®å·æ“ä½œ" tabindex="-1">Dockeræ•°æ®å·æ“ä½œ <a class="header-anchor" href="#dockeræ•°æ®å·æ“ä½œ" aria-hidden="true">#</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># åˆ—å‡ºæ‰€æœ‰æ•°æ®å·</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">volume</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ls</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># ä½¿ç”¨è¿‡æ»¤ï¼Œåˆ—å‡ºæ‰€æœ‰æœªä½¿ç”¨çš„æ•°æ®å·</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">volume</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ls</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--filter</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dangling=</span><span style="color:#89DDFF;">true</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># åˆ é™¤ä¸€ä¸ªæ•°æ®å·</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># å®¹å™¨æ­£åœ¨ä½¿ç”¨çš„æ•°æ®å·ä¸èƒ½åˆ é™¤ï¼Œç»‘å®šæŒ‚è½½çš„æ— æ³•åˆ é™¤ã€‚</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">volume</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">volume_nam</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">&gt;</span></span>\n<span class="line"></span></code></pre></div><h2 id="docker-compose" tabindex="-1">Docker-Compose <a class="header-anchor" href="#docker-compose" aria-hidden="true">#</a></h2><p>å®‰è£…docker-composeå‰å¿…éœ€å…ˆå®‰è£…å¥½dockerã€‚Docker-composeçš„ä¸‹è½½å’Œå®‰è£…å¾ˆç®€å•ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šæ•™ç¨‹ï¼Œæˆ‘å°±ä¸å†è¯¦è¿°äº†ã€‚è¿™é‡Œåªè®°å½•ä¸‹ubuntuç³»ç»Ÿä¸‹docker-composeçš„å®‰è£…è¿‡ç¨‹ã€‚</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Step 1: ä»¥ubuntuä¸ºä¾‹ï¼Œä¸‹è½½docker-compose</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-L</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://github.com/docker/compose/releases/download/1.17.0/docker-compose-</span><span style="color:#89DDFF;">`</span><span style="color:#FFCB6B;">uname</span><span style="color:#C3E88D;"> -s</span><span style="color:#89DDFF;">`</span><span style="color:#FFCB6B;">-</span><span style="color:#89DDFF;">`</span><span style="color:#FFCB6B;">uname</span><span style="color:#C3E88D;"> -m</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/local/bin/docker-compose</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># Step 2: ç»™äºˆdocker-composeå¯æ‰§è¡Œæƒé™</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">+x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/local/bin/docker-compose</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># Step 3: æŸ¥çœ‹docker-composeç‰ˆæœ¬</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--version</span></span>\n<span class="line"></span></code></pre></div><h2 id="docker-compose-ymlé…ç½®æ–‡ä»¶" tabindex="-1">Docker-compose.ymlé…ç½®æ–‡ä»¶ <a class="header-anchor" href="#docker-compose-ymlé…ç½®æ–‡ä»¶" aria-hidden="true">#</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># ç¬¬ä¸€éƒ¨åˆ†: Building(æ„å»ºé•œåƒ)</span></span>\n<span class="line"><span style="color:#FFCB6B;">web:</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># ä½¿ç”¨å½“å‰ç›®å½•ä¸‹çš„Dockerfile</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">build:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">args:</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># å¢åŠ é¢å¤–å‚æ•°</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">APP_HOME:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">app</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">volumes:</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># ç›®å½•æŒ‚è½½</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.:/code</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">depends_on:</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># ä¾èµ–dbå’Œredis</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">db</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># ä½¿ç”¨å®šåˆ¶åŒ–çš„Dockerfileï¼ŒæŒ‡å®šæ–°ç›®å½•ç›¸å¯¹è·¯å¾„å’Œæ–‡ä»¶å</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">build:</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">context:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./dir</span><span style="color:#A6ACCD;"> </span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">dockerfile:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Dockerfile.dev</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">container_name:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">app</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># è‡ªå®šä¹‰å®¹å™¨å</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># åŸºäºç°æœ‰é•œåƒæ„å»º</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">image:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ubuntu</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">image:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ubuntu:</span><span style="color:#F78C6C;">14.04</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">image:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">remote-registry:</span><span style="color:#F78C6C;">4000</span><span style="color:#C3E88D;">/postgresql</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">image:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bcbc65fd</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># ç¬¬äºŒéƒ¨åˆ†: Ports(ç«¯å£)</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">ports:</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># æŒ‡å®šç«¯å£æ˜ å°„ï¼ŒHOST:Container</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">6379</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># æŒ‡å®šå®¹å™¨çš„ç«¯å£6379ï¼Œå®¿ä¸»æœºä¼šéšæœºæ˜ å°„ç«¯å£</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8080:80</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># å®¿ä¸»æœºç«¯å£8080ï¼Œå¯¹åº”å®¹å™¨80</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># æš´éœ²ç«¯å£ç»™-linkæˆ–å¤„äºåŒä¸€ç½‘ç»œçš„å®¹å™¨ï¼Œä¸æš´éœ²ç»™å®¿ä¸»æœºã€‚</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">expose:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3000</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># ç¬¬ä¸‰éƒ¨åˆ†: Environment Variables(ç¯å¢ƒå˜é‡)</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">environment:</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">MODE:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">development</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">SHOW:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">true</span><span style="color:#89DDFF;">&#39;</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># ç­‰åŒäº</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">environment:</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MODE=development</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">SHOW:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">true</span><span style="color:#89DDFF;">&#39;</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># ä½¿ç”¨ç¯å¢ƒå˜é‡.envæ–‡ä»¶</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">env_file:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.env</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">env_file:</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./common.env</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./apps/web.env</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># ç¬¬å››éƒ¨åˆ†ï¼šcommands (å‘½ä»¤)</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># å®¹å™¨å¯åŠ¨åé»˜è®¤æ‰§è¡Œå‘½ä»¤</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">command</span><span style="color:#FFCB6B;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bundle</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">thin</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3000</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">command</span><span style="color:#FFCB6B;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/bin/bash/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">start.sh</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span></span>\n<span class="line"><span style="color:#A6ACCD;"> </span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># å®¹å™¨å¯åŠ¨åç¨‹åºå…¥å£</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">entrypoint:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/code/entrypoint.sh</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># ç¬¬äº”éƒ¨åˆ†ï¼šNetworks(ç½‘ç»œ)</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">networks:</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># ä½¿ç”¨bridgeé©±åŠ¨åˆ›å»ºåä¸ºfrontendçš„ç½‘ç»œ</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">frontend:</span></span>\n<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">driver:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bridge</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">networks:</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># ä½¿ç”¨åˆ›å»ºçš„ç½‘ç»œè¿›è¡Œé€šä¿¡</span></span>\n<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">frontend</span></span>\n<span class="line"><span style="color:#A6ACCD;">      </span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># åŠ å…¥å·²ç»å­˜åœ¨çš„å¤–éƒ¨ç½‘ç»œ</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">networks:</span><span style="color:#A6ACCD;"> </span></span>\n<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">default:</span></span>\n<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">external:</span></span>\n<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#FFCB6B;">name:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">my-pre-existing-network</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># ç¬¬å…­éƒ¨åˆ†ï¼šVolumes(æ•°æ®å·)</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">volumes:</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># åˆ›å»ºåä¸ºpostgres_dataçš„æ•°æ®å·</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">postgres_data:</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">db:</span></span>\n<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">image:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">postgres:latest</span></span>\n<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">volumes:</span></span>\n<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">postgres_data:/var/lib/postgresql/data</span></span>\n<span class="line"><span style="color:#A6ACCD;">      </span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># ç¬¬ä¸ƒéƒ¨åˆ†ï¼šExternal Links(å¤–éƒ¨é“¾æ¥)</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># ç›®çš„æ˜¯è®©Composeèƒ½å¤Ÿè¿æ¥é‚£äº›ä¸åœ¨docker-compose.ymlä¸­å®šä¹‰çš„å•ç‹¬è¿è¡Œå®¹å™¨</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">services:</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">web:</span></span>\n<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">external_links:</span></span>\n<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis_1</span></span>\n<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">project_db_1:mysql</span></span>\n<span class="line"></span></code></pre></div><h2 id="docker-composeæŒ‡å—" tabindex="-1">Docker-composeæŒ‡å— <a class="header-anchor" href="#docker-composeæŒ‡å—" aria-hidden="true">#</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># é»˜è®¤ä½¿ç”¨docker-compose.ymlæ„å»ºé•œåƒ</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--no-cache</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># ä¸å¸¦ç¼“å­˜çš„æ„å»º</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æŒ‡å®šä¸åŒymlæ–‡ä»¶æ¨¡æ¿ç”¨äºæ„å»ºé•œåƒ</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-f</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose1.yml</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># åˆ—å‡ºComposeæ–‡ä»¶æ„å»ºçš„é•œåƒ</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">images</span><span style="color:#A6ACCD;">                          </span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># å¯åŠ¨æ‰€æœ‰ç¼–æ’å®¹å™¨æœåŠ¡</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">up</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æŸ¥çœ‹æ­£åœ¨è¿è¡Œä¸­çš„å®¹å™¨</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ps</span><span style="color:#A6ACCD;"> </span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æŸ¥çœ‹æ‰€æœ‰ç¼–æ’å®¹å™¨ï¼ŒåŒ…æ‹¬å·²åœæ­¢çš„å®¹å™¨</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ps</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># è¿›å…¥æŒ‡å®šå®¹å™¨æ‰§è¡Œå‘½ä»¤</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bash</span><span style="color:#A6ACCD;"> </span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">web</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">python</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">manage.py</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">migrate</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--noinput</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æŸ¥çœ‹webå®¹å™¨çš„å®æ—¶æ—¥å¿—</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">logs</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-f</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">web</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># åœæ­¢æ‰€æœ‰upå‘½ä»¤å¯åŠ¨çš„å®¹å™¨</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">down</span><span style="color:#A6ACCD;"> </span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># åœæ­¢æ‰€æœ‰upå‘½ä»¤å¯åŠ¨çš„å®¹å™¨,å¹¶ç§»é™¤æ•°æ®å·</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">down</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># é‡æ–°å¯åŠ¨åœæ­¢æœåŠ¡çš„å®¹å™¨</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">restart</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">web</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æš‚åœwebå®¹å™¨</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pause</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">web</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æ¢å¤webå®¹å™¨</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">unpause</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">web</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># åˆ é™¤webå®¹å™¨ï¼Œåˆ é™¤å‰å¿…éœ€åœæ­¢stop webå®¹å™¨æœåŠ¡</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">web</span><span style="color:#A6ACCD;">  </span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># æŸ¥çœ‹å„ä¸ªæœåŠ¡å®¹å™¨å†…è¿è¡Œçš„è¿›ç¨‹ </span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">top</span><span style="color:#A6ACCD;">                            </span></span>\n<span class="line"></span></code></pre></div>',33)];const t=s(o,[["render",function(s,l,p,o,t,c){return n(),a("div",null,e)}]]);export{p as __pageData,t as default};
